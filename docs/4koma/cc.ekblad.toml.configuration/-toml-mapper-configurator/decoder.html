<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" charset="UTF-8">
    <title>decoder</title>
    <link href="../../../images/logo-icon.svg" rel="icon" type="image/svg">
    <script>var pathToRoot = "../../../";</script>
    <script>const storage = localStorage.getItem("dokka-dark-mode")
    if (storage == null) {
        const osDarkSchemePreferred = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
        if (osDarkSchemePreferred === true) {
            document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
    } else {
        const savedDarkMode = JSON.parse(storage)
        if(savedDarkMode === true) {
            document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
    }
    </script>
<script type="text/javascript" src="../../../scripts/sourceset_dependencies.js" async="async"></script>
<link href="../../../styles/style.css" rel="Stylesheet">
<link href="../../../styles/jetbrains-mono.css" rel="Stylesheet">
<link href="../../../styles/main.css" rel="Stylesheet">
<link href="../../../styles/prism.css" rel="Stylesheet">
<link href="../../../styles/logo-styles.css" rel="Stylesheet">
<script type="text/javascript" src="../../../scripts/clipboard.js" async="async"></script>
<script type="text/javascript" src="../../../scripts/navigation-loader.js" async="async"></script>
<script type="text/javascript" src="../../../scripts/platform-content-handler.js" async="async"></script>
<script type="text/javascript" src="../../../scripts/main.js" defer="defer"></script>
<script type="text/javascript" src="../../../scripts/prism.js" async="async"></script>
<script type="text/javascript" src="../../../scripts/symbol-parameters-wrapper_deferred.js" defer="defer"></script>
</head>
<body>
<div class="navigation-wrapper" id="navigation-wrapper">
    <div id="leftToggler"><span class="icon-toggler"></span></div>
    <div class="library-name">
            <a href="../../../index.html">
                    <span>4koma</span>
            </a>
    </div>
    <div>
1.2.0    </div>
    <div class="pull-right d-flex">
        <button id="theme-toggle-button"><span id="theme-toggle"></span></button>
        <div id="searchBar"></div>
    </div>
</div>
<div id="container">
    <div id="leftColumn">
        <div id="sideMenu"></div>
    </div>
    <div id="main">
<div class="main-content" id="content" pageIds="4koma::cc.ekblad.toml.configuration/TomlMapperConfigurator/decoder/#kotlin.Function3[cc.ekblad.toml.transcoding.TomlDecoder,kotlin.reflect.KType,TypeParam(bounds=[cc.ekblad.toml.model.TomlValue]),TypeParam(bounds=[kotlin.Any])?]/PointingToDeclaration//769193423">
  <div class="breadcrumbs"><a href="../../../index.html">4koma</a><span class="delimiter">/</span><a href="../index.html">cc.ekblad.toml.configuration</a><span class="delimiter">/</span><a href="index.html">TomlMapperConfigurator</a><span class="delimiter">/</span><span class="current">decoder</span></div>
  <div class="cover ">
    <h1 class="cover"><span><span>decoder</span></span></h1>
  </div>
  <div class="platform-hinted " data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":dokkaHtml/main"><div class="symbol monospace"><span class="token keyword">inline </span><span class="token keyword">fun </span><span class="token operator">&lt;</span><span class="token keyword"></span><a href="decoder.html">T</a><span class="token operator"> : </span><a href="../../cc.ekblad.toml.model/-toml-value/index.html">TomlValue</a><span class="token punctuation">, </span><span class="token keyword"></span><a href="decoder.html">R</a><span class="token operator"> : </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html">Any</a><span class="token operator">&gt; </span><a href="decoder.html"><span class="token function">decoder</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter "><span class="token keyword">noinline </span>decoder<span class="token operator">: </span><span class="token keyword"></span><a href="../../cc.ekblad.toml.transcoding/-toml-decoder/index.html">TomlDecoder</a><span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token keyword"></span>targetType<span class="token operator">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-type/index.html">KType</a><span class="token punctuation">, </span><span class="token keyword"></span>tomlValue<span class="token operator">: </span><a href="decoder.html">T</a><span class="token punctuation">)</span><span class="token operator"> -&gt; </span><span class="token keyword"></span><a href="decoder.html">R</a><span class="token operator">?</span></span></span><span class="token punctuation">)</span></div><p class="paragraph">Configures a custom decoder function for the given Kotlin type. A custom decoder function is a function from a <a href="../../cc.ekblad.toml.model/-toml-value/index.html">TomlValue</a> and a <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-type/index.html">KType</a> representing a target type, to that target type. Custom decoder functions are associated with a <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-class/index.html">KClass</a> representing that target type.</p><p class="paragraph">When a TOML value is decoded to some target type, the decoder will look for all decoder functions associated with that type. All decoder functions matching that type are then tried in reverse order of registration, from newest to oldest. I.e. for some decoder <code class="lang-kotlin">D = tomlMapper { decoder&lt;T&gt;(A) ; decoder&lt;T&gt;(B) }</code>, <code class="lang-kotlin">B</code> will always be tried before <code class="lang-kotlin">A</code> when trying to decode values of type <code class="lang-kotlin">T</code>.</p><p class="paragraph">A decoder function can signal that they are unable to decode their given input by calling <a href="../../cc.ekblad.toml.transcoding/-toml-decoder/pass.html">TomlDecoder.pass</a>. When this happens, the decoder will go on to try the next relevant decoder, if any.</p><p class="paragraph">Binding decoder functions to a KClass rather than a <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-type/index.html">KType</a>, while allowing the decoder function to access that KType, allows for more fine-grained control over deserialization. Let's say, for instance, that you have a custom data structure, generic in its elements, that you want to decode TOML values into.</p><p class="paragraph">If a decoder function was bound to a KType, you would need to register one decoder function for <code class="lang-kotlin">MyDataStructure&lt;Int&gt;</code>, one for <code class="lang-kotlin">MyDataStructure&lt;String&gt;</code>, etc. - a lot of unnecessary boilerplate.</p><p class="paragraph">If a decoder function was bound to a KClass and did not have access to the corresponding KType, you would have no way of knowing the type of the elements of the data structure. You would instead be forced to rely on the default decoding of TOML values - <a href="../../cc.ekblad.toml.model/-toml-value/-integer/index.html">TomlValue.Integer</a> into <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-long/index.html">Long</a>, <a href="../../cc.ekblad.toml.model/-toml-value/-map/index.html">TomlValue.Map</a> into <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-map/index.html">Map</a>, and so on - an unacceptable loss of functionality.</p><p class="paragraph">A decoder function with access to the target type's KType, bound to the target type's KClass gets the best of both worlds. As an example, here is how you would create a custom decoder function for the generic data structure used in the above paragraphs.</p><br><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">val mapper = tomlMapper {<br>    decoder { kType, tomlValue: TomlValue.List -&gt;<br>        val myDataStructure = MyDataStructure&lt;Any&gt;()<br>        tomlValue.forEach {<br>            decode(it, kType.arguments.single().type!!)<br>            myDataStructure.add(convertedElement)<br>        }<br>        myDataStructure<br>    }<br><br>val result = mapper.decode&lt;MyDataStructure&lt;SomeType&gt;&gt;(Path.of(&quot;path&quot;, &quot;to&quot;, &quot;file.toml&quot;))</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><br>
<hr><div class="symbol monospace"><span class="token keyword">inline </span><span class="token keyword">fun </span><span class="token operator">&lt;</span><span class="token keyword"></span><a href="decoder.html">T</a><span class="token operator"> : </span><a href="../../cc.ekblad.toml.model/-toml-value/index.html">TomlValue</a><span class="token punctuation">, </span><span class="token keyword"></span><a href="decoder.html">R</a><span class="token operator"> : </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html">Any</a><span class="token operator">&gt; </span><a href="decoder.html"><span class="token function">decoder</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter "><span class="token keyword">crossinline </span>decoder<span class="token operator">: </span><span class="token keyword"></span><a href="../../cc.ekblad.toml.transcoding/-toml-decoder/index.html">TomlDecoder</a><span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token keyword"></span>tomlValue<span class="token operator">: </span><a href="decoder.html">T</a><span class="token punctuation">)</span><span class="token operator"> -&gt; </span><span class="token keyword"></span><a href="decoder.html">R</a><span class="token operator">?</span></span></span><span class="token punctuation">)</span></div><p class="paragraph">Convenience overload for <a href="decoder.html">decoder</a>, for when you don't need to consider the full target KType.</p><hr><div class="symbol monospace"><span class="token keyword"></span><span class="token keyword">fun </span><span class="token operator">&lt;</span><span class="token keyword"></span><a href="decoder.html">T</a><span class="token operator"> : </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html">Any</a><span class="token operator">&gt; </span><a href="decoder.html"><span class="token function">decoder</span></a><span class="token punctuation">(</span><span class="parameters "><span class="parameter ">kClass<span class="token operator">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-class/index.html">KClass</a><span class="token operator">&lt;</span><span class="token keyword"></span><a href="decoder.html">T</a><span class="token operator">&gt;</span><span class="token punctuation">, </span></span><span class="parameter ">decoder<span class="token operator">: </span><span class="token keyword"></span><a href="../../cc.ekblad.toml.transcoding/-toml-decoder/index.html">TomlDecoder</a><span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token keyword"></span>targetType<span class="token operator">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/-k-type/index.html">KType</a><span class="token punctuation">, </span><span class="token keyword"></span>tomlValue<span class="token operator">: </span><a href="../../cc.ekblad.toml.model/-toml-value/index.html">TomlValue</a><span class="token punctuation">)</span><span class="token operator"> -&gt; </span><span class="token keyword"></span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html">Any</a><span class="token operator">?</span></span></span><span class="token punctuation">)</span></div></div></div>
</div>
      <div class="footer">
        <span class="go-to-top-icon"><a href="#content" id="go-to-top-link"></a></span><span>© 2023 Copyright</span><span
                class="pull-right"><span>Generated by </span><a
                href="https://github.com/Kotlin/dokka"><span>dokka</span><span class="padded-icon"></span></a></span>
      </div>
    </div>
</div>
</body>
</html>
